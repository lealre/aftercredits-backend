Found the Issue! ðŸŽ¯
The problem is a classic N+1 query performance issue. Here's what's happening:
The Critical Problem
In MovieCard.tsx, every single movie card calls useRatings(movie.imdbId) independently:
This means:
With 20 movies on the page â†’ 20 separate API calls for ratings
When you click "More Filters" â†’ State changes â†’ Components re-render â†’ All those hooks might re-execute
The 1,114ms processing time is from handling all these concurrent API calls and renders
Additional Issues
useMovies dependency chain - Every time orderBy or ascending changes, loadMovies recreates, triggering useEffect to reload everything
Users array reference - The MovieCard memo comparison doesn't deeply compare users, so reference changes cause unnecessary re-renders
The Solution
You need to fetch ratings centrally, once for all movies, not individually per card. Here's my recommendation:
Create a centralized ratings hook that fetches ratings for multiple movies at once
Pass ratings down as props instead of each card fetching its own
Add proper memoization to prevent cascading re-renders